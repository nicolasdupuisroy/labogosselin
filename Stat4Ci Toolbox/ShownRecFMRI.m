function [theKey, rt] = shownrec(window, anImage, timing, jitter, respSpectrum)aTest = length(size(anImage));if aTest == 2,	[ySize, xSize] = size(anImage);else	[ySize, xSize, nothing] = size(anImage);end	rect = [0, 0, ySize-1, xSize-1];rectCentre = centerRect(rect, SCREEN(window(1),'Rect'));SCREEN(window(4), 'PutImage', anImage, rectCentre)stop = 0;% fixationSCREEN(window(1), 'WaitBlanking');SCREEN('CopyWindow', window(3), window(1), rectCentre, rectCentre, 'srcCopyQuickly');startSecs = GetSecs;while 1	[keyIsDown,endSecs,keyCode] = KbCheck;	temp = getsecs;	if (temp-startSecs >= timing(1))		break;	end	if keyIsDown		theKey = KbName(keyCode);		if ~isempty(findstr(theKey, respSpectrum))			stop = 1;		end	endend% faceSCREEN(window(1), 'WaitBlanking');SCREEN('CopyWindow', window(4), window(1), rectCentre, rectCentre, 'srcCopyQuickly');while 1 	if ~stop		[keyIsDown,endSecs,keyCode] = KbCheck;	end	temp = getsecs;	if (temp-startSecs >= sum(timing(1:2)))		break;	end	if keyIsDown & ~stop		theKey = KbName(keyCode);		if ~isempty(findstr(theKey, respSpectrum))			stop = 1;		end	endend% blankSCREEN(window(1), 'WaitBlanking');SCREEN('CopyWindow', window(2), window(1), rectCentre, rectCentre, 'srcCopyQuickly');while 1	if ~stop		[keyIsDown,endSecs,keyCode] = KbCheck;	end	temp = getsecs;	if (temp-startSecs >= sum(timing))		break;	end	if keyIsDown & ~stop		theKey = KbName(keyCode);		if ~isempty(findstr(theKey, respSpectrum))			stop = 1;		end	endendwaitsecs(jitter)if ~isempty(findstr(theKey, respSpectrum))	rt = endSecs - startSecs - timing(1);else	theKey = 0;	rt = Inf; % never respondedendFlushEvents('keyDown');