function varargout = whiteNoise(varargin)global gloparif (length(glopar)~=3)	error(sprintf('glopar(1) = size along the X axis\nglopar(2) = size along the Y axis\nglopar(3) = signal-to-noise ratio\nMust be defined in the CID.'));endoneTrial = varargin{1};rand('state', oneTrial(1));xSize = glopar{1};ySize = glopar{2};theNoise = randn(ySize, xSize);theNoise = min(max(theNoise / (2*2.33), -.5), .5);varargout{1} = theNoise;if (nargin == 2)	s2n = glopar{3};	anImage = double(varargin{2});	anImage = (anImage - min(anImage(:))) / (max(anImage(:)) - min(anImage(:)));	varargout{2} = uint8(255*(s2n * (anImage - .5) + (1 - s2n) * theNoise + .5));end